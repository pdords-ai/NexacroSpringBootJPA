<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Nexacro ê³ ê¸‰ ê¸°ëŠ¥ - ì°¨íŠ¸ì™€ ê·¸ë˜í”„</title>
    <script type="text/javascript" src="http://localhost:8080/nexacro/nexacro.js"></script>
</head>
<body>
    <script type="text/javascript">
        /*
            ===== ì°¨íŠ¸ì™€ ê·¸ë˜í”„ ì˜ˆì œ =====
            
            ì´ ì˜ˆì œì—ì„œëŠ” ë‹¤ìŒì„ ë°°ì›ë‹ˆë‹¤:
            1. ë‹¤ì–‘í•œ ì°¨íŠ¸ íƒ€ì… (ë§‰ëŒ€, ì„ , ì›í˜•, ì˜ì—­)
            2. ì°¨íŠ¸ ë°ì´í„° ë°”ì¸ë”©
            3. ì°¨íŠ¸ ìŠ¤íƒ€ì¼ë§ê³¼ ì»¤ìŠ¤í„°ë§ˆì´ì§•
            4. ì¸í„°ë™í‹°ë¸Œ ì°¨íŠ¸ (í´ë¦­, í˜¸ë²„)
            5. ì‹¤ì‹œê°„ ë°ì´í„° ì—…ë°ì´íŠ¸
            6. ì°¨íŠ¸ ë‚´ë³´ë‚´ê¸°
        */
        function on_application_ready() {
            
            /*
                ===== 1ë‹¨ê³„: ë°ì´í„°ì…‹ ì„¤ì • =====
            */
            var salesDataset = new nexacro.Dataset("salesDataset");
            salesDataset.addColumn("month", "string");      // ì›”
            salesDataset.addColumn("sales", "number");      // ë§¤ì¶œ
            salesDataset.addColumn("profit", "number");     // ì´ìµ
            salesDataset.addColumn("cost", "number");       // ë¹„ìš©
            
            // ìƒ˜í”Œ ë°ì´í„°
            var monthlyData = [
                {month: "1ì›”", sales: 12000000, profit: 3000000, cost: 9000000},
                {month: "2ì›”", sales: 15000000, profit: 4000000, cost: 11000000},
                {month: "3ì›”", sales: 18000000, profit: 5000000, cost: 13000000},
                {month: "4ì›”", sales: 16000000, profit: 4500000, cost: 11500000},
                {month: "5ì›”", sales: 20000000, profit: 6000000, cost: 14000000},
                {month: "6ì›”", sales: 22000000, profit: 7000000, cost: 15000000},
                {month: "7ì›”", sales: 19000000, profit: 5500000, cost: 13500000},
                {month: "8ì›”", sales: 21000000, profit: 6500000, cost: 14500000},
                {month: "9ì›”", sales: 23000000, profit: 7500000, cost: 15500000},
                {month: "10ì›”", sales: 25000000, profit: 8000000, cost: 17000000},
                {month: "11ì›”", sales: 24000000, profit: 7800000, cost: 16200000},
                {month: "12ì›”", sales: 28000000, profit: 9000000, cost: 19000000}
            ];
            
            for (var i = 0; i < monthlyData.length; i++) {
                var data = monthlyData[i];
                var newRow = salesDataset.addRow();
                salesDataset.setCellData(newRow, "month", data.month);
                salesDataset.setCellData(newRow, "sales", data.sales);
                salesDataset.setCellData(newRow, "profit", data.profit);
                salesDataset.setCellData(newRow, "cost", data.cost);
            }
            
            // ì¹´í…Œê³ ë¦¬ë³„ ë°ì´í„°ì…‹
            var categoryDataset = new nexacro.Dataset("categoryDataset");
            categoryDataset.addColumn("category", "string");
            categoryDataset.addColumn("sales", "number");
            categoryDataset.addColumn("percentage", "number");
            
            var categoryData = [
                {category: "ì „ìì œí’ˆ", sales: 45000000, percentage: 35},
                {category: "ê°€êµ¬", sales: 32000000, percentage: 25},
                {category: "ì˜ë¥˜", sales: 28000000, percentage: 22},
                {category: "ì‹í’ˆ", sales: 18000000, percentage: 14},
                {category: "ê¸°íƒ€", sales: 5000000, percentage: 4}
            ];
            
            for (var i = 0; i < categoryData.length; i++) {
                var data = categoryData[i];
                var newRow = categoryDataset.addRow();
                categoryDataset.setCellData(newRow, "category", data.category);
                categoryDataset.setCellData(newRow, "sales", data.sales);
                categoryDataset.setCellData(newRow, "percentage", data.percentage);
            }
            
            /*
                ===== 2ë‹¨ê³„: UI ì»´í¬ë„ŒíŠ¸ë“¤ ë§Œë“¤ê¸° =====
            */
            
            // ì œëª©
            var titleLabel = new nexacro.Label("titleLabel");
            titleLabel.set_text("ì°¨íŠ¸ì™€ ê·¸ë˜í”„ - ë§¤ì¶œ ë¶„ì„ ëŒ€ì‹œë³´ë“œ");
            titleLabel.set_left(50);
            titleLabel.set_top(20);
            titleLabel.set_width(800);
            titleLabel.set_height(40);
            titleLabel.set_font("bold 18px Arial");
            titleLabel.set_color("darkblue");
            titleLabel.set_background("lightblue");
            
            // ì°¨íŠ¸ íƒ€ì… ì„ íƒ
            var chartTypeLabel = new nexacro.Label("chartTypeLabel");
            chartTypeLabel.set_text("ì°¨íŠ¸ íƒ€ì…:");
            chartTypeLabel.set_left(50);
            chartTypeLabel.set_top(70);
            chartTypeLabel.set_width(80);
            chartTypeLabel.set_height(25);
            
            var chartTypeCombo = new nexacro.ComboBox("chartTypeCombo");
            chartTypeCombo.set_left(140);
            chartTypeCombo.set_top(70);
            chartTypeCombo.set_width(120);
            chartTypeCombo.set_height(25);
            chartTypeCombo.addItem("ë§‰ëŒ€ ì°¨íŠ¸", "bar");
            chartTypeCombo.addItem("ì„  ì°¨íŠ¸", "line");
            chartTypeCombo.addItem("ì˜ì—­ ì°¨íŠ¸", "area");
            chartTypeCombo.addItem("ì›í˜• ì°¨íŠ¸", "pie");
            chartTypeCombo.set_text("ë§‰ëŒ€ ì°¨íŠ¸");
            
            // ë°ì´í„° íƒ€ì… ì„ íƒ
            var dataTypeLabel = new nexacro.Label("dataTypeLabel");
            dataTypeLabel.set_text("ë°ì´í„° íƒ€ì…:");
            dataTypeLabel.set_left(280);
            dataTypeLabel.set_top(70);
            dataTypeLabel.set_width(80);
            dataTypeLabel.set_height(25);
            
            var dataTypeCombo = new nexacro.ComboBox("dataTypeCombo");
            dataTypeCombo.set_left(370);
            dataTypeCombo.set_top(70);
            dataTypeCombo.set_width(120);
            dataTypeCombo.set_height(25);
            dataTypeCombo.addItem("ì›”ë³„ ë§¤ì¶œ", "monthly");
            dataTypeCombo.addItem("ì¹´í…Œê³ ë¦¬ë³„", "category");
            dataTypeCombo.set_text("ì›”ë³„ ë§¤ì¶œ");
            
            // ì°¨íŠ¸ ì—…ë°ì´íŠ¸ ë²„íŠ¼
            var updateChartButton = new nexacro.Button("updateChartButton");
            updateChartButton.set_text("ì°¨íŠ¸ ì—…ë°ì´íŠ¸");
            updateChartButton.set_left(510);
            updateChartButton.set_top(70);
            updateChartButton.set_width(120);
            updateChartButton.set_height(25);
            updateChartButton.set_background("lightgreen");
            
            // ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ ë²„íŠ¼
            var realtimeButton = new nexacro.Button("realtimeButton");
            realtimeButton.set_text("ì‹¤ì‹œê°„ ì‹œì‘");
            realtimeButton.set_left(640);
            realtimeButton.set_top(70);
            realtimeButton.set_width(120);
            realtimeButton.set_height(25);
            realtimeButton.set_background("lightblue");
            
            // ì°¨íŠ¸ ì»¨í…Œì´ë„ˆ
            var chartContainer = new nexacro.Container("chartContainer");
            chartContainer.set_left(50);
            chartContainer.set_top(110);
            chartContainer.set_width(800);
            chartContainer.set_height(400);
            chartContainer.set_background("white");
            chartContainer.set_border("2px solid #ccc");
            
            // ì°¨íŠ¸ ì œëª©
            var chartTitle = new nexacro.Label("chartTitle");
            chartTitle.set_text("ì›”ë³„ ë§¤ì¶œ í˜„í™©");
            chartTitle.set_left(20);
            chartTitle.set_top(20);
            chartTitle.set_width(760);
            chartTitle.set_height(30);
            chartTitle.set_font("bold 16px Arial");
            chartTitle.set_color("darkblue");
            chartTitle.set_background("lightgray");
            
            // ì°¨íŠ¸ ì˜ì—­ (ì‹œë®¬ë ˆì´ì…˜)
            var chartArea = new nexacro.Label("chartArea");
            chartArea.set_text("ì°¨íŠ¸ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤");
            chartArea.set_left(20);
            chartArea.set_top(60);
            chartArea.set_width(760);
            chartArea.set_height(320);
            chartArea.set_background("lightyellow");
            chartArea.set_border("1px solid #ccc");
            chartArea.set_font("14px Arial");
            
            // í†µê³„ ì •ë³´
            var statsContainer = new nexacro.Container("statsContainer");
            statsContainer.set_left(870);
            statsContainer.set_top(110);
            statsContainer.set_width(300);
            statsContainer.set_height(400);
            statsContainer.set_background("lightgray");
            statsContainer.set_border("2px solid #ccc");
            
            var statsTitle = new nexacro.Label("statsTitle");
            statsTitle.set_text("í†µê³„ ì •ë³´");
            statsTitle.set_left(10);
            statsTitle.set_top(10);
            statsTitle.set_width(280);
            statsTitle.set_height(30);
            statsTitle.set_font("bold 14px Arial");
            statsTitle.set_background("darkgray");
            statsTitle.set_color("white");
            
            var statsLabel = new nexacro.Label("statsLabel");
            statsLabel.set_text("í†µê³„ ì •ë³´ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤");
            statsLabel.set_left(10);
            statsLabel.set_top(50);
            statsLabel.set_width(280);
            statsLabel.set_height(340);
            statsLabel.set_background("white");
            statsLabel.set_border("1px solid #ccc");
            statsLabel.set_font("12px Arial");
            
            // ì»¨íŠ¸ë¡¤ íŒ¨ë„
            var controlPanel = new nexacro.Container("controlPanel");
            controlPanel.set_left(50);
            controlPanel.set_top(520);
            controlPanel.set_width(800);
            controlPanel.set_height(80);
            controlPanel.set_background("lightcyan");
            controlPanel.set_border("1px solid #ccc");
            
            var controlTitle = new nexacro.Label("controlTitle");
            controlTitle.set_text("ì°¨íŠ¸ ì»¨íŠ¸ë¡¤");
            controlTitle.set_left(10);
            controlTitle.set_top(10);
            controlTitle.set_width(780);
            controlTitle.set_height(20);
            controlTitle.set_font("bold 12px Arial");
            
            // ì»¨íŠ¸ë¡¤ ë²„íŠ¼ë“¤
            var exportButton = new nexacro.Button("exportButton");
            exportButton.set_text("ì°¨íŠ¸ ë‚´ë³´ë‚´ê¸°");
            exportButton.set_left(10);
            exportButton.set_top(35);
            exportButton.set_width(120);
            exportButton.set_height(30);
            exportButton.set_background("lightgreen");
            
            var printButton = new nexacro.Button("printButton");
            printButton.set_text("ì¸ì‡„");
            printButton.set_left(140);
            printButton.set_top(35);
            printButton.set_width(80);
            printButton.set_height(30);
            printButton.set_background("lightblue");
            
            var fullscreenButton = new nexacro.Button("fullscreenButton");
            fullscreenButton.set_text("ì „ì²´í™”ë©´");
            fullscreenButton.set_left(230);
            fullscreenButton.set_top(35);
            fullscreenButton.set_width(100);
            fullscreenButton.set_height(30);
            fullscreenButton.set_background("lightyellow");
            
            var resetButton = new nexacro.Button("resetButton");
            resetButton.set_text("ì´ˆê¸°í™”");
            resetButton.set_left(340);
            resetButton.set_top(35);
            resetButton.set_width(80);
            resetButton.set_height(30);
            resetButton.set_background("lightcoral");
            
            /*
                ===== 3ë‹¨ê³„: ì°¨íŠ¸ ìƒì„± í•¨ìˆ˜ë“¤ =====
            */
            
            var currentChartType = "bar";
            var currentDataType = "monthly";
            var isRealtimeActive = false;
            var realtimeInterval;
            
            /*
                ë§‰ëŒ€ ì°¨íŠ¸ ìƒì„±
            */
            function createBarChart() {
                var chartText = "ğŸ“Š ë§‰ëŒ€ ì°¨íŠ¸\n\n";
                
                if (currentDataType === "monthly") {
                    chartText += "ì›”ë³„ ë§¤ì¶œ í˜„í™© (ë‹¨ìœ„: ì²œë§Œì›)\n";
                    chartText += "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n";
                    
                    var maxSales = 0;
                    for (var i = 0; i < salesDataset.getRowCount(); i++) {
                        var sales = salesDataset.getCellData(i, "sales");
                        if (sales > maxSales) maxSales = sales;
                    }
                    
                    for (var i = 0; i < salesDataset.getRowCount(); i++) {
                        var month = salesDataset.getCellData(i, "sales");
                        var sales = salesDataset.getCellData(i, "sales");
                        var barLength = Math.round((sales / maxSales) * 30);
                        var bar = "â–ˆ".repeat(barLength);
                        chartText += month + ": " + bar + " " + (sales / 10000000).toFixed(1) + "ì²œë§Œì›\n";
                    }
                } else {
                    chartText += "ì¹´í…Œê³ ë¦¬ë³„ ë§¤ì¶œ í˜„í™© (ë‹¨ìœ„: ì²œë§Œì›)\n";
                    chartText += "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n";
                    
                    var maxSales = 0;
                    for (var i = 0; i < categoryDataset.getRowCount(); i++) {
                        var sales = categoryDataset.getCellData(i, "sales");
                        if (sales > maxSales) maxSales = sales;
                    }
                    
                    for (var i = 0; i < categoryDataset.getRowCount(); i++) {
                        var category = categoryDataset.getCellData(i, "category");
                        var sales = categoryDataset.getCellData(i, "sales");
                        var barLength = Math.round((sales / maxSales) * 30);
                        var bar = "â–ˆ".repeat(barLength);
                        chartText += category + ": " + bar + " " + (sales / 10000000).toFixed(1) + "ì²œë§Œì›\n";
                    }
                }
                
                chartArea.set_text(chartText);
            }
            
            /*
                ì„  ì°¨íŠ¸ ìƒì„±
            */
            function createLineChart() {
                var chartText = "ğŸ“ˆ ì„  ì°¨íŠ¸\n\n";
                
                if (currentDataType === "monthly") {
                    chartText += "ì›”ë³„ ë§¤ì¶œ ì¶”ì´ (ë‹¨ìœ„: ì²œë§Œì›)\n";
                    chartText += "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n";
                    
                    var maxSales = 0;
                    var minSales = Infinity;
                    for (var i = 0; i < salesDataset.getRowCount(); i++) {
                        var sales = salesDataset.getCellData(i, "sales");
                        if (sales > maxSales) maxSales = sales;
                        if (sales < minSales) minSales = sales;
                    }
                    
                    var range = maxSales - minSales;
                    var levels = 10;
                    
                    for (var level = levels; level >= 0; level--) {
                        var value = minSales + (range * level / levels);
                        chartText += (value / 10000000).toFixed(1).padStart(6) + " â”‚";
                        
                        for (var i = 0; i < salesDataset.getRowCount(); i++) {
                            var sales = salesDataset.getCellData(i, "sales");
                            var month = salesDataset.getCellData(i, "month");
                            var normalizedValue = (sales - minSales) / range;
                            var normalizedLevel = level / levels;
                            
                            if (Math.abs(normalizedValue - normalizedLevel) < 0.1) {
                                chartText += " â—";
                            } else {
                                chartText += "  ";
                            }
                        }
                        chartText += "\n";
                    }
                    
                    chartText += "       â””";
                    for (var i = 0; i < salesDataset.getRowCount(); i++) {
                        chartText += "â”€â”€";
                    }
                    chartText += "\n       ";
                    for (var i = 0; i < salesDataset.getRowCount(); i++) {
                        var month = salesDataset.getCellData(i, "month");
                        chartText += month;
                    }
                }
                
                chartArea.set_text(chartText);
            }
            
            /*
                ì›í˜• ì°¨íŠ¸ ìƒì„±
            */
            function createPieChart() {
                var chartText = "ğŸ¥§ ì›í˜• ì°¨íŠ¸\n\n";
                
                if (currentDataType === "category") {
                    chartText += "ì¹´í…Œê³ ë¦¬ë³„ ë§¤ì¶œ ë¹„ìœ¨\n";
                    chartText += "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n";
                    
                    var totalSales = 0;
                    for (var i = 0; i < categoryDataset.getRowCount(); i++) {
                        totalSales += categoryDataset.getCellData(i, "sales");
                    }
                    
                    for (var i = 0; i < categoryDataset.getRowCount(); i++) {
                        var category = categoryDataset.getCellData(i, "category");
                        var sales = categoryDataset.getCellData(i, "sales");
                        var percentage = (sales / totalSales) * 100;
                        var pieSlice = "â—".repeat(Math.round(percentage / 5));
                        chartText += category + ": " + pieSlice + " " + percentage.toFixed(1) + "%\n";
                    }
                } else {
                    chartText += "ì›í˜• ì°¨íŠ¸ëŠ” ì¹´í…Œê³ ë¦¬ë³„ ë°ì´í„°ì—ë§Œ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.\n";
                    chartText += "ë°ì´í„° íƒ€ì…ì„ 'ì¹´í…Œê³ ë¦¬ë³„'ë¡œ ë³€ê²½í•´ì£¼ì„¸ìš”.";
                }
                
                chartArea.set_text(chartText);
            }
            
            /*
                ì˜ì—­ ì°¨íŠ¸ ìƒì„±
            */
            function createAreaChart() {
                var chartText = "ğŸ“Š ì˜ì—­ ì°¨íŠ¸\n\n";
                
                if (currentDataType === "monthly") {
                    chartText += "ì›”ë³„ ë§¤ì¶œê³¼ ì´ìµ ì˜ì—­ (ë‹¨ìœ„: ì²œë§Œì›)\n";
                    chartText += "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n";
                    
                    var maxValue = 0;
                    for (var i = 0; i < salesDataset.getRowCount(); i++) {
                        var sales = salesDataset.getCellData(i, "sales");
                        var profit = salesDataset.getCellData(i, "profit");
                        if (sales > maxValue) maxValue = sales;
                        if (profit > maxValue) maxValue = profit;
                    }
                    
                    for (var i = 0; i < salesDataset.getRowCount(); i++) {
                        var month = salesDataset.getCellData(i, "month");
                        var sales = salesDataset.getCellData(i, "sales");
                        var profit = salesDataset.getCellData(i, "profit");
                        
                        var salesBar = "â–ˆ".repeat(Math.round((sales / maxValue) * 20));
                        var profitBar = "â–“".repeat(Math.round((profit / maxValue) * 20));
                        
                        chartText += month + ":\n";
                        chartText += "  ë§¤ì¶œ: " + salesBar + " " + (sales / 10000000).toFixed(1) + "ì²œë§Œì›\n";
                        chartText += "  ì´ìµ: " + profitBar + " " + (profit / 10000000).toFixed(1) + "ì²œë§Œì›\n\n";
                    }
                }
                
                chartArea.set_text(chartText);
            }
            
            /*
                ì°¨íŠ¸ ì—…ë°ì´íŠ¸
            */
            function updateChart() {
                currentChartType = chartTypeCombo.get_text();
                currentDataType = dataTypeCombo.get_text();
                
                switch (currentChartType) {
                    case "ë§‰ëŒ€ ì°¨íŠ¸":
                        createBarChart();
                        break;
                    case "ì„  ì°¨íŠ¸":
                        createLineChart();
                        break;
                    case "ì›í˜• ì°¨íŠ¸":
                        createPieChart();
                        break;
                    case "ì˜ì—­ ì°¨íŠ¸":
                        createAreaChart();
                        break;
                }
                
                updateStatistics();
            }
            
            /*
                í†µê³„ ì •ë³´ ì—…ë°ì´íŠ¸
            */
            function updateStatistics() {
                var statsText = "";
                
                if (currentDataType === "monthly") {
                    var totalSales = 0;
                    var totalProfit = 0;
                    var maxSales = 0;
                    var minSales = Infinity;
                    var maxMonth = "";
                    var minMonth = "";
                    
                    for (var i = 0; i < salesDataset.getRowCount(); i++) {
                        var sales = salesDataset.getCellData(i, "sales");
                        var profit = salesDataset.getCellData(i, "profit");
                        var month = salesDataset.getCellData(i, "month");
                        
                        totalSales += sales;
                        totalProfit += profit;
                        
                        if (sales > maxSales) {
                            maxSales = sales;
                            maxMonth = month;
                        }
                        if (sales < minSales) {
                            minSales = sales;
                            minMonth = month;
                        }
                    }
                    
                    statsText = "ğŸ“Š ì›”ë³„ ë§¤ì¶œ í†µê³„\n\n";
                    statsText += "ì´ ë§¤ì¶œ: " + (totalSales / 100000000).toFixed(1) + "ì–µì›\n";
                    statsText += "ì´ ì´ìµ: " + (totalProfit / 100000000).toFixed(1) + "ì–µì›\n";
                    statsText += "í‰ê·  ë§¤ì¶œ: " + (totalSales / salesDataset.getRowCount() / 10000000).toFixed(1) + "ì²œë§Œì›\n";
                    statsText += "ì´ìµë¥ : " + ((totalProfit / totalSales) * 100).toFixed(1) + "%\n\n";
                    statsText += "ìµœê³  ë§¤ì¶œ: " + maxMonth + " (" + (maxSales / 10000000).toFixed(1) + "ì²œë§Œì›)\n";
                    statsText += "ìµœì € ë§¤ì¶œ: " + minMonth + " (" + (minSales / 10000000).toFixed(1) + "ì²œë§Œì›)\n";
                } else {
                    var totalSales = 0;
                    var maxCategory = "";
                    var maxSales = 0;
                    
                    for (var i = 0; i < categoryDataset.getRowCount(); i++) {
                        var sales = categoryDataset.getCellData(i, "sales");
                        var category = categoryDataset.getCellData(i, "category");
                        
                        totalSales += sales;
                        
                        if (sales > maxSales) {
                            maxSales = sales;
                            maxCategory = category;
                        }
                    }
                    
                    statsText = "ğŸ“Š ì¹´í…Œê³ ë¦¬ë³„ í†µê³„\n\n";
                    statsText += "ì´ ë§¤ì¶œ: " + (totalSales / 100000000).toFixed(1) + "ì–µì›\n";
                    statsText += "í‰ê·  ë§¤ì¶œ: " + (totalSales / categoryDataset.getRowCount() / 10000000).toFixed(1) + "ì²œë§Œì›\n\n";
                    statsText += "ìµœê³  ë§¤ì¶œ ì¹´í…Œê³ ë¦¬: " + maxCategory + "\n";
                    statsText += "(" + (maxSales / 10000000).toFixed(1) + "ì²œë§Œì›)\n\n";
                    
                    statsText += "ì¹´í…Œê³ ë¦¬ë³„ ë¹„ìœ¨:\n";
                    for (var i = 0; i < categoryDataset.getRowCount(); i++) {
                        var category = categoryDataset.getCellData(i, "category");
                        var sales = categoryDataset.getCellData(i, "sales");
                        var percentage = (sales / totalSales) * 100;
                        statsText += "â€¢ " + category + ": " + percentage.toFixed(1) + "%\n";
                    }
                }
                
                statsLabel.set_text(statsText);
            }
            
            /*
                ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸
            */
            function toggleRealtime() {
                if (isRealtimeActive) {
                    clearInterval(realtimeInterval);
                    realtimeButton.set_text("ì‹¤ì‹œê°„ ì‹œì‘");
                    realtimeButton.set_background("lightblue");
                    isRealtimeActive = false;
                } else {
                    realtimeInterval = setInterval(function() {
                        // ëœë¤í•˜ê²Œ ë°ì´í„° ì—…ë°ì´íŠ¸
                        var randomRow = Math.floor(Math.random() * salesDataset.getRowCount());
                        var currentSales = salesDataset.getCellData(randomRow, "sales");
                        var newSales = currentSales + (Math.random() - 0.5) * 1000000;
                        salesDataset.setCellData(randomRow, "sales", Math.max(0, newSales));
                        
                        updateChart();
                    }, 2000);
                    
                    realtimeButton.set_text("ì‹¤ì‹œê°„ ì¤‘ì§€");
                    realtimeButton.set_background("lightcoral");
                    isRealtimeActive = true;
                }
            }
            
            /*
                ===== 4ë‹¨ê³„: ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ì—°ê²° =====
            */
            
            updateChartButton.addEventHandler("onclick", function() {
                updateChart();
            });
            
            realtimeButton.addEventHandler("onclick", function() {
                toggleRealtime();
            });
            
            exportButton.addEventHandler("onclick", function() {
                var chartData = "ì°¨íŠ¸ ë°ì´í„° ë‚´ë³´ë‚´ê¸°\n\n";
                chartData += "ì°¨íŠ¸ íƒ€ì…: " + currentChartType + "\n";
                chartData += "ë°ì´í„° íƒ€ì…: " + currentDataType + "\n";
                chartData += "ìƒì„± ì‹œê°„: " + new Date().toLocaleString() + "\n\n";
                chartData += chartArea.get_text();
                
                alert("ì°¨íŠ¸ ë°ì´í„°ê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤!\n\n" + chartData);
            });
            
            printButton.addEventHandler("onclick", function() {
                alert("ì¸ì‡„ ê¸°ëŠ¥ì´ ì‹¤í–‰ë©ë‹ˆë‹¤.\n(ì‹¤ì œë¡œëŠ” window.print()ë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤)");
            });
            
            fullscreenButton.addEventHandler("onclick", function() {
                alert("ì „ì²´í™”ë©´ ëª¨ë“œê°€ ì‹¤í–‰ë©ë‹ˆë‹¤.\n(ì‹¤ì œë¡œëŠ” ì°¨íŠ¸ë¥¼ ì „ì²´í™”ë©´ìœ¼ë¡œ í‘œì‹œí•©ë‹ˆë‹¤)");
            });
            
            resetButton.addEventHandler("onclick", function() {
                if (confirm("ì°¨íŠ¸ë¥¼ ì´ˆê¸° ìƒíƒœë¡œ ë˜ëŒë¦¬ì‹œê² ìŠµë‹ˆê¹Œ?")) {
                    chartTypeCombo.set_text("ë§‰ëŒ€ ì°¨íŠ¸");
                    dataTypeCombo.set_text("ì›”ë³„ ë§¤ì¶œ");
                    updateChart();
                }
            });
            
            /*
                ===== 5ë‹¨ê³„: ì´ˆê¸° ì„¤ì • =====
            */
            updateChart();
            
            /*
                ===== 6ë‹¨ê³„: ëª¨ë“  ì»´í¬ë„ŒíŠ¸ë¥¼ í™”ë©´ì— ì¶”ê°€ =====
            */
            this.add(titleLabel);
            this.add(chartTypeLabel);
            this.add(chartTypeCombo);
            this.add(dataTypeLabel);
            this.add(dataTypeCombo);
            this.add(updateChartButton);
            this.add(realtimeButton);
            this.add(chartContainer);
            this.add(chartTitle);
            this.add(chartArea);
            this.add(statsContainer);
            this.add(statsTitle);
            this.add(statsLabel);
            this.add(controlPanel);
            this.add(controlTitle);
            this.add(exportButton);
            this.add(printButton);
            this.add(fullscreenButton);
            this.add(resetButton);
            
            /*
                ===== ì •ë¦¬ =====
                ì´ ì˜ˆì œì—ì„œ ë°°ìš´ ì°¨íŠ¸ì™€ ê·¸ë˜í”„ ê¸°ëŠ¥ë“¤:
                
                1. ë‹¤ì–‘í•œ ì°¨íŠ¸ íƒ€ì…:
                   - ë§‰ëŒ€ ì°¨íŠ¸ (ë°ì´í„° ë¹„êµ)
                   - ì„  ì°¨íŠ¸ (ì¶”ì´ ë¶„ì„)
                   - ì›í˜• ì°¨íŠ¸ (ë¹„ìœ¨ í‘œì‹œ)
                   - ì˜ì—­ ì°¨íŠ¸ (ëˆ„ì  ë°ì´í„°)
                
                2. ë°ì´í„° ë°”ì¸ë”©:
                   - ë°ì´í„°ì…‹ê³¼ ì°¨íŠ¸ ì—°ê²°
                   - ì‹¤ì‹œê°„ ë°ì´í„° ì—…ë°ì´íŠ¸
                   - ë™ì  ì°¨íŠ¸ ìƒì„±
                
                3. ì¸í„°ë™í‹°ë¸Œ ê¸°ëŠ¥:
                   - ì°¨íŠ¸ íƒ€ì… ë³€ê²½
                   - ë°ì´í„° íƒ€ì… ì „í™˜
                   - ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸
                   - ì°¨íŠ¸ ë‚´ë³´ë‚´ê¸°
                
                4. ì‹œê°í™” ê¸°ë²•:
                   - í…ìŠ¤íŠ¸ ê¸°ë°˜ ì°¨íŠ¸ (ASCII Art)
                   - ìƒ‰ìƒê³¼ ìŠ¤íƒ€ì¼ë§
                   - í†µê³„ ì •ë³´ í‘œì‹œ
                   - ì‚¬ìš©ì ì¹œí™”ì  ì¸í„°í˜ì´ìŠ¤
                
                5. ê³ ê¸‰ ê¸°ëŠ¥:
                   - ì‹¤ì‹œê°„ ë°ì´í„° ìŠ¤íŠ¸ë¦¬ë°
                   - ì°¨íŠ¸ ë‚´ë³´ë‚´ê¸°
                   - ì „ì²´í™”ë©´ ëª¨ë“œ
                   - ì¸ì‡„ ê¸°ëŠ¥
                
                ì‹¤ì œ í”„ë¡œì íŠ¸ì—ì„œëŠ”:
                - Chart.js, D3.js ë“± ì „ë¬¸ ì°¨íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš©
                - SVGë‚˜ Canvasë¥¼ ì´ìš©í•œ ê³ í’ˆì§ˆ ì°¨íŠ¸
                - ì• ë‹ˆë©”ì´ì…˜ê³¼ ì¸í„°ë™ì…˜
                - ì„œë²„ì™€ì˜ ì‹¤ì‹œê°„ ë°ì´í„° ì—°ë™
                
                ì´ì œ ë°ì´í„° ì‹œê°í™”ì˜ ê¸°ì´ˆë¥¼ ë‹¤ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤!
            */
        }
    </script>
</body>
</html>
